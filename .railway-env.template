# ============================================
# Railway Environment Variables Template
# WhatsApp Recruitment Platform v5.1
# ============================================
#
# INSTRUCTIONS:
# 1. Copy this file's contents to Railway's environment variables UI
# 2. Replace all placeholder values (xxx, your-xxx, etc.)
# 3. Use Railway's Redis addon for REDIS_URL (auto-generated)
# 4. Store sensitive values in Railway's encrypted variable storage
#
# ============================================

# ============ AI MODELS ============
# Required: Get from https://console.anthropic.com/ and https://platform.openai.com/
ANTHROPIC_API_KEY=sk-ant-xxx
OPENAI_API_KEY=sk-xxx

# ============ DATABASE (SUPABASE) ============
# Required: Get from Supabase project settings
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_KEY=eyJxxx
DATABASE_URL=postgresql://postgres:xxx@db.xxx.supabase.co:5432/postgres

# ============ CHATWOOT ============
# Required: Get from Chatwoot Settings > Integrations > API
CHATWOOT_BASE_URL=https://app.chatwoot.com
CHATWOOT_API_TOKEN=xxx
CHATWOOT_ACCOUNT_ID=123456

# CRITICAL: Generate secure webhook secret (32+ random characters)
# Use: openssl rand -hex 32
CHATWOOT_WEBHOOK_SECRET=your-secure-random-string-here

# ============ WHATSAPP / 360DIALOG ============
# Required: Get from 360Dialog partner hub
DIALOG360_API_KEY=xxx

# CRITICAL: Generate secure webhook secret (32+ random characters)
# Use: openssl rand -hex 32
DIALOG360_WEBHOOK_SECRET=your-secure-random-string-here

# Webhook verification token (can be any string you choose)
WHATSAPP_VERIFY_TOKEN=your-verify-token-here

# ============ REDIS (RAILWAY ADDON) ============
# Auto-generated by Railway Redis addon - DO NOT SET MANUALLY
# Railway will inject this automatically when you add Redis addon
# REDIS_URL=redis://default:password@redis.railway.internal:6379

# ============ MONITORING ============
# Optional but STRONGLY recommended for production
SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
ENVIRONMENT=production
LOG_LEVEL=INFO

# For Sentry release tracking (auto-set by Railway)
GIT_COMMIT_SHA=$RAILWAY_GIT_COMMIT_SHA

# ============ APPLICATION SETTINGS ============
# Server configuration
PORT=8000
WEB_CONCURRENCY=4  # Number of Uvicorn workers (adjust based on Railway plan)

# Python configuration
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1
PIP_NO_CACHE_DIR=1

# ============ LANGGRAPH SETTINGS ============
# Redis checkpointing (required for fault tolerance)
CHECKPOINT_BACKEND=redis
ENABLE_CHECKPOINTING=true

# Graph timeout (seconds)
GRAPH_TIMEOUT_SECONDS=120

# RAG settings (enable after implementation)
ENABLE_RAG=false
MAX_RAG_ITERATIONS=3

# ============ CELERY (BACKGROUND JOBS) ============
# Celery broker URL (same as REDIS_URL for Railway)
CELERY_BROKER_URL=$REDIS_URL
CELERY_RESULT_BACKEND=$REDIS_URL

# Celery worker settings
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# ============ RATE LIMITING ============
# API rate limits (requests per minute)
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# Per-user message limits
MAX_MESSAGES_PER_USER_PER_MINUTE=10
MAX_MESSAGES_PER_USER_PER_HOUR=100

# ============ SECURITY ============
# CORS settings (adjust for your frontend domain)
CORS_ORIGINS=*  # Change to specific domains in production
ALLOWED_HOSTS=*  # Change to specific hosts in production

# Session settings
SECRET_KEY=your-secret-key-here  # Generate with: openssl rand -hex 32
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true

# ============ FEATURE FLAGS ============
# Enable/disable features
ENABLE_WEBHOOK_SIGNATURE_VALIDATION=true
ENABLE_REQUEST_ID_TRACKING=true
ENABLE_GDPR_COMPLIANCE=true
ENABLE_RATE_LIMITING=true

# Documentation endpoints
ENABLE_DOCS=false  # Set to true for staging, false for production
ENABLE_REDOC=false

# ============ PERFORMANCE ============
# Database connection pooling
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# HTTP client timeouts
HTTP_TIMEOUT=30
HTTP_MAX_RETRIES=3

# ============ MONITORING & OBSERVABILITY ============
# Structured logging format
LOG_FORMAT=json  # json | text
LOG_STRUCTURED=true

# Metrics collection
ENABLE_PROMETHEUS_METRICS=true
METRICS_PORT=9090

# Health check intervals
HEALTHCHECK_INTERVAL_SECONDS=30
HEALTHCHECK_TIMEOUT_SECONDS=10

# ============ OPTIONAL: EXTERNAL SERVICES ============
# Email notifications (optional)
# SENDGRID_API_KEY=xxx
# EMAIL_FROM=noreply@yourcompany.com

# SMS notifications (optional)
# TWILIO_ACCOUNT_SID=xxx
# TWILIO_AUTH_TOKEN=xxx
# TWILIO_PHONE_NUMBER=+1234567890

# Storage (optional - for file uploads)
# AWS_ACCESS_KEY_ID=xxx
# AWS_SECRET_ACCESS_KEY=xxx
# AWS_S3_BUCKET=your-bucket-name
# AWS_REGION=us-east-1

# ============================================
# RAILWAY-SPECIFIC VARIABLES (Auto-Injected)
# ============================================
# These are automatically set by Railway - DO NOT SET MANUALLY
#
# RAILWAY_ENVIRONMENT=production
# RAILWAY_PROJECT_ID=xxx
# RAILWAY_SERVICE_ID=xxx
# RAILWAY_DEPLOYMENT_ID=xxx
# RAILWAY_GIT_COMMIT_SHA=xxx
# RAILWAY_GIT_BRANCH=main
# RAILWAY_PUBLIC_DOMAIN=xxx.railway.app
# RAILWAY_PRIVATE_DOMAIN=xxx.railway.internal
#
# ============================================
